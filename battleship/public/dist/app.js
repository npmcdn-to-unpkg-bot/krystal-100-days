function parseGuess(e){var s=["A","B","C","D","E","F","G"];if(null===e||2!==e.length)alert("Oops, please enter a letter and anumber on the board.");else{var t=e.charAt(0),i=s.indexOf(t),n=e.charAt(1);if(isNaN(i)||isNaN(n))console.log("Oops, that isn't on the board");else{if(!(i<0||i>=model.boardSize||n<0||n>=model.boardSize))return i+n;alert("Oops, that's off the board!")}}return null}function init(){var e=document.getElementById("fireButton");e.onclick=handleFireButton;var s=document.getElementById("guessInput");s.onkeypress=handleKeyPress}function handleKeyPress(e){var s=document.getElementById("fireButton");if(13===e.keyCode)return s.click(),!1}function handleFireButton(){console.log("clicked");var e=document.getElementById("guessInput"),s=e.value;controller.processGuess(s),e.value=""}var model={boardSize:7,numShips:3,shipLength:3,shipsSunk:0,ships:[{locations:["10","20","30"],hits:["","",""]},{locations:["32","33","34"],hits:["","",""]},{locations:["63","64","65"],hits:["","",""]}],fire:function(e){for(var s=0;s<this.numShips;s++){var t=this.ships[s],i=t.locations.indexOf(e);if(i>=0)return t.hits[i]="hit",view.displayHit(e),view.displayMessage("HIT!"),this.isSunk(t)&&(view.displayMessage("You sank my battleship"),this.shipsSunk++),!0}return view.displayMiss(e),view.displayMessage("You missed."),!1},isSunk:function(e){for(var s=0;s<this.shipLength;s++)if("hit"!==e.hits[s])return!1;return!0}},controller={guesses:0,processGuess:function(e){var s=parseGuess(e);if(s){this.guesses++;var t=model.fire(s);t&&model.shipsSunk===model.numShips&&(console.log("Done"),view.displayMessage("You sank all my battleships, in "+this.guesses+" guesses"))}}},view={displayMessage:function(e){var s=document.getElementById("messageArea");s.innerHTML=e},displayHit:function(e){var s=document.getElementById(e);s.setAttribute("class","hit")},displayMiss:function(e){var s=document.getElementById(e);s.setAttribute("class","miss")}};window.onload=init;